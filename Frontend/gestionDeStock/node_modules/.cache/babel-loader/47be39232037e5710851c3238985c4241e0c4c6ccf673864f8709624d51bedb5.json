{"ast":null,"code":"import _regeneratorRuntime from\"/home/lenovo/Gstock/Frontend/gestionDeStock/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/lenovo/Gstock/Frontend/gestionDeStock/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/lenovo/Gstock/Frontend/gestionDeStock/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{NavLink,useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function InsertProduct(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),productName=_useState2[0],setProductName=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),productPrice=_useState4[0],setProductPrice=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),productBarcode=_useState6[0],setProductBarcode=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),productQuantity=_useState8[0],setProductQuantity=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),error=_useState12[0],setError=_useState12[1];var navigate=useNavigate(\"\");var setName=function setName(e){setProductName(e.target.value);};var setPrice=function setPrice(e){setProductPrice(e.target.value);};var setBarcode=function setBarcode(e){var value=e.target.value.slice(0,12);setProductBarcode(value);};var setQuantity=function setQuantity(e){// Fonction pour mettre à jour la quantité\nsetProductQuantity(e.target.value);};var addProduct=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(!productName||!productPrice||!productBarcode||!productQuantity)){_context.next=4;break;}setError(\"*Please fill in all the required fields.\");return _context.abrupt(\"return\");case 4:setLoading(true);setError(\"\");_context.prev=6;_context.next=9;return fetch(\"http://localhost:3001/insertproduct\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({\"ProductName\":productName,\"ProductPrice\":productPrice,\"ProductBarcode\":productBarcode,\"ProductQuantity\":productQuantity})});case 9:res=_context.sent;_context.next=12;return res.json();case 12:if(res.status===201){alert(\"Data Inserted\");setProductName(\"\");setProductPrice(0);setProductBarcode(0);setProductQuantity(0);navigate('/products');}else if(res.status===422){alert(\"Product is already added with that barcode.\");}else{setError(\"Something went wrong. Please try again.\");}_context.next=19;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](6);setError(\"An error occurred. Please try again later.\");console.log(_context.t0);case 19:_context.prev=19;setLoading(false);return _context.finish(19);case 22:case\"end\":return _context.stop();}},_callee,null,[[6,15,19,22]]);}));return function addProduct(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid p-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"\",children:\"Enter Product Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5 col-lg-6 col-md-6 col-12 fs-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"product_name\",className:\"form-label fw-bold\",children:\"Product Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:setName,value:productName,className:\"form-control fs-5\",id:\"product_name\",placeholder:\"Enter Product Name\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 col-lg-6 col-md-6 col-12 fs-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"product_price\",className:\"form-label fw-bold\",children:\"Product Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:setPrice,value:productPrice,className:\"form-control fs-5\",id:\"product_price\",placeholder:\"Enter Product Price\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 col-lg-6 col-md-6 col-12 fs-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"product_barcode\",className:\"form-label fw-bold\",children:\"Product Barcode\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:setBarcode,value:productBarcode,maxLength:12,className:\"form-control fs-5\",id:\"product_barcode\",placeholder:\"Enter Product Barcode\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 mb-5 col-lg-6 col-md-6 col-12 fs-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"product_quantity\",className:\"form-label fw-bold\",children:\"Product Quantity\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:setQuantity,value:productQuantity,className:\"form-control fs-5\",id:\"product_quantity\",placeholder:\"Enter Product Quantity\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-center col-lg-6 col-md-6\",children:[/*#__PURE__*/_jsx(NavLink,{to:\"/products\",className:\"btn btn-primary me-5 fs-4\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:addProduct,className:\"btn btn-primary fs-4\",disabled:loading,children:loading?'Inserting...':'Insert'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col text-center col-lg-6\",children:error&&/*#__PURE__*/_jsx(\"div\",{className:\"text-danger mt-3 fs-5 fw-bold\",children:error})})]});}","map":{"version":3,"names":["React","useState","NavLink","useNavigate","jsx","_jsx","jsxs","_jsxs","InsertProduct","_useState","_useState2","_slicedToArray","productName","setProductName","_useState3","_useState4","productPrice","setProductPrice","_useState5","_useState6","productBarcode","setProductBarcode","_useState7","_useState8","productQuantity","setProductQuantity","_useState9","_useState10","loading","setLoading","_useState11","_useState12","error","setError","navigate","setName","e","target","value","setPrice","setBarcode","slice","setQuantity","addProduct","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","preventDefault","abrupt","fetch","method","headers","body","JSON","stringify","sent","json","status","alert","t0","console","log","finish","stop","_x","apply","arguments","className","children","htmlFor","type","onChange","id","placeholder","required","maxLength","to","onClick","disabled"],"sources":["/home/lenovo/Gstock/Frontend/gestionDeStock/src/components/InsertProduct.js"],"sourcesContent":["import React, { useState } from 'react'\nimport { NavLink, useNavigate } from 'react-router-dom';\n\n\nexport default function InsertProduct() {\n\n    const [productName, setProductName] = useState(\"\");\n    const [productPrice, setProductPrice] = useState();\n    const [productBarcode, setProductBarcode] = useState();\n    const [productQuantity, setProductQuantity] = useState(); \n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(\"\");\n    const navigate = useNavigate(\"\");\n\n   \n    const setName = (e) => {\n        setProductName(e.target.value);\n    }\n\n    const setPrice = (e) => {\n        setProductPrice(e.target.value);\n    }\n\n    const setBarcode = (e) => {\n        const value = e.target.value.slice(0, 12);\n        setProductBarcode(value);\n    }\n    const setQuantity = (e) => { // Fonction pour mettre à jour la quantité\n        setProductQuantity(e.target.value);\n    };\n\n    const addProduct = async (e) => {\n        e.preventDefault();\n\n        if (!productName || !productPrice || !productBarcode || !productQuantity ) {\n            setError(\"*Please fill in all the required fields.\");\n            return;\n        }\n\n     \n\n        setLoading(true);\n        setError(\"\");\n\n        try {\n            const res = await fetch(\"http://localhost:3001/insertproduct\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({ \"ProductName\": productName, \"ProductPrice\": productPrice, \"ProductBarcode\": productBarcode, \"ProductQuantity\": productQuantity })\n            });\n\n            await res.json();\n\n            if (res.status === 201) {\n                alert(\"Data Inserted\");\n\n                setProductName(\"\");\n                setProductPrice(0);\n                setProductBarcode(0);\n                setProductQuantity(0);\n                navigate('/products');\n            }\n            else if (res.status === 422) {\n                alert(\"Product is already added with that barcode.\");\n            }\n            else {\n                setError(\"Something went wrong. Please try again.\");\n            }\n        } catch (err) {\n            setError(\"An error occurred. Please try again later.\");\n            console.log(err);\n        } finally {\n            setLoading(false);\n        }\n    }\n\n    return (\n        <div className='container-fluid p-5'>\n             <h1 className=''>Enter Product Information</h1>\n            \n             \n            <div className=\"mt-5 col-lg-6 col-md-6 col-12 fs-4\">\n                <label htmlFor=\"product_name\" className=\"form-label fw-bold\">Product Name</label>\n                <input type=\"text\" onChange={setName} value={productName} className=\"form-control fs-5\" id=\"product_name\" placeholder=\"Enter Product Name\" required />\n            </div>\n            <div className=\"mt-3 col-lg-6 col-md-6 col-12 fs-4\">\n                <label htmlFor=\"product_price\" className=\"form-label fw-bold\">Product Price</label>\n                <input type=\"number\" onChange={setPrice} value={productPrice} className=\"form-control fs-5\" id=\"product_price\" placeholder=\"Enter Product Price\" required />\n            </div>\n            <div className=\"mt-3 col-lg-6 col-md-6 col-12 fs-4\">\n                <label htmlFor=\"product_barcode\" className=\"form-label fw-bold\">Product Barcode</label>\n                <input type=\"number\" onChange={setBarcode} value={productBarcode} maxLength={12} className=\"form-control fs-5\" id=\"product_barcode\" placeholder=\"Enter Product Barcode\" required />\n            </div>\n            <div className=\"mt-3 mb-5 col-lg-6 col-md-6 col-12 fs-4\">\n            <label htmlFor=\"product_quantity\" className=\"form-label fw-bold\">Product Quantity</label>\n            <input type=\"number\" onChange={setQuantity} value={productQuantity} className=\"form-control fs-5\" id=\"product_quantity\" placeholder=\"Enter Product Quantity\" required />\n            </div>\n\n            <div className='d-flex justify-content-center col-lg-6 col-md-6'>\n                <NavLink to=\"/products\" className='btn btn-primary me-5 fs-4'>Cancel</NavLink>\n                <button type=\"submit\" onClick={addProduct} className=\"btn btn-primary fs-4\" disabled={loading}>{loading ? 'Inserting...' : 'Insert'}</button>\n            </div>\n            <div className=\"col text-center col-lg-6\">\n                {error && <div className=\"text-danger mt-3 fs-5 fw-bold\">{error}</div>}\n            </div>\n        </div>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}