{"ast":null,"code":"import _regeneratorRuntime from\"/home/lenovo/Gstock/Frontend/gestionDeStock/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/lenovo/Gstock/Frontend/gestionDeStock/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/lenovo/Gstock/Frontend/gestionDeStock/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{NavLink}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserList(){useEffect(function(){getUsers();// Appel de la fonction pour récupérer les données des utilisateurs lors du chargement du composant\n},[]);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];// Utilisation d'un état pour stocker les données des utilisateurs\nvar getUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"http://localhost:3001/users\",{// Endpoint pour récupérer les utilisateurs\nmethod:\"GET\",headers:{\"Content-Type\":\"application/json\"}});case 3:res=_context.sent;_context.next=6;return res.json();case 6:data=_context.sent;if(res.status===200){console.log(\"User data retrieved.\");setUserData(data);}else{console.log(\"Something went wrong. Please try again.\");}_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 13:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function getUsers(){return _ref.apply(this,arguments);};}();var deleteUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(userId){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"http://localhost:3001/users/\".concat(userId),{// Endpoint pour supprimer l'utilisateur\nmethod:\"DELETE\",headers:{\"Content-Type\":\"application/json\"}});case 3:res=_context2.sent;if(res.status===200){console.log(\"User deleted successfully.\");// Mettre à jour la liste des utilisateurs après suppression\ngetUsers();}else{console.log(\"Failed to delete user.\");}_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}));return function deleteUser(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid p-5\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"User List\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-auto mt-3\",style:{maxHeight:\"38rem\"},children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-hover mt-3 fs-5\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"tr_color\",children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Update\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:userData.map(function(user,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(NavLink,{to:\"/updateuser/\".concat(user._id),className:\"btn btn-primary\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-pen-to-square\"})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:function onClick(){return deleteUser(user._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-trash\"})})})]},index);})})]})})]});}","map":{"version":3,"names":["React","useEffect","useState","NavLink","jsx","_jsx","jsxs","_jsxs","UserList","getUsers","_useState","_useState2","_slicedToArray","userData","setUserData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","data","wrap","_callee$","_context","prev","next","fetch","method","headers","sent","json","status","console","log","t0","stop","apply","arguments","deleteUser","_ref2","_callee2","userId","_callee2$","_context2","concat","_x","className","children","style","maxHeight","scope","map","user","index","name","email","to","_id","onClick"],"sources":["/home/lenovo/Gstock/Frontend/gestionDeStock/src/components/Client.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { NavLink } from 'react-router-dom';\n\nexport default function UserList() {\n\n    useEffect(() => {\n        getUsers(); // Appel de la fonction pour récupérer les données des utilisateurs lors du chargement du composant\n    }, []);\n\n    const [userData, setUserData] = useState([]); // Utilisation d'un état pour stocker les données des utilisateurs\n\n    const getUsers = async () => {\n        try {\n            const res = await fetch(\"http://localhost:3001/users\", { // Endpoint pour récupérer les utilisateurs\n                method: \"GET\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n\n            const data = await res.json();\n\n            if (res.status === 200) {\n                console.log(\"User data retrieved.\");\n                setUserData(data);\n            } else {\n                console.log(\"Something went wrong. Please try again.\");\n            }\n        } catch (err) {\n            console.log(err);\n        }\n    }\n\n    const deleteUser = async (userId) => {\n        try {\n            const res = await fetch(`http://localhost:3001/users/${userId}`, { // Endpoint pour supprimer l'utilisateur\n                method: \"DELETE\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n\n            if (res.status === 200) {\n                console.log(\"User deleted successfully.\");\n                // Mettre à jour la liste des utilisateurs après suppression\n                getUsers();\n            } else {\n                console.log(\"Failed to delete user.\");\n            }\n        } catch (err) {\n            console.log(err);\n        }\n    }\n\n    return (\n        <div className='container-fluid p-5'>\n            <h1>User List</h1>\n            <div className=\"overflow-auto mt-3\" style={{ maxHeight: \"38rem\" }}>\n                <table className=\"table table-striped table-hover mt-3 fs-5\">\n                    <thead>\n                        <tr className=\"tr_color\">\n                            <th scope=\"col\"></th>\n                            <th scope=\"col\">Name</th>\n                            <th scope=\"col\">Email</th>\n                            \n                            <th scope=\"col\">Update</th>\n                                <th scope=\"col\">Delete</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {\n                            userData.map((user, index) => (\n                                <tr key={index}>\n                                    <th scope=\"row\">{index + 1}</th>\n                                    <td>{user.name}</td>\n                                    <td>{user.email}</td>\n                                    <td><NavLink to={`/updateuser/${user._id}`}className=\"btn btn-primary\"><i className=\"fa-solid fa-pen-to-square\"></i></NavLink></td>\n                                    <td><button className=\"btn btn-danger\" onClick={() => deleteUser(user._id)}><i className=\"fa-solid fa-trash\"></i></button></td>\n                                   \n                                </tr>\n                            ))\n                        }\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}