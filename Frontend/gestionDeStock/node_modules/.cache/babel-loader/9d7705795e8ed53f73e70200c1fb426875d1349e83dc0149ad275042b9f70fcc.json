{"ast":null,"code":"import React,{useEffect,useState}from'react';import{NavLink}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserList(){useEffect(()=>{getUsers();// Appel de la fonction pour récupérer les données des utilisateurs lors du chargement du composant\n},[]);const[userData,setUserData]=useState([]);// Utilisation d'un état pour stocker les données des utilisateurs\nconst getUsers=async()=>{try{const res=await fetch(\"http://localhost:3001/users\",{// Endpoint pour récupérer les utilisateurs\nmethod:\"GET\",headers:{\"Content-Type\":\"application/json\"}});const data=await res.json();if(res.status===200){console.log(\"User data retrieved.\");setUserData(data);}else{console.log(\"Something went wrong. Please try again.\");}}catch(err){console.log(err);}};const deleteUser=async userId=>{try{const res=await fetch(\"http://localhost:3001/users/\".concat(userId),{// Endpoint pour supprimer l'utilisateur\nmethod:\"DELETE\",headers:{\"Content-Type\":\"application/json\"}});if(res.status===200){console.log(\"User deleted successfully.\");// Mettre à jour la liste des utilisateurs après suppression\ngetUsers();}else{console.log(\"Failed to delete user.\");}}catch(err){console.log(err);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid p-5\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"User List\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-auto mt-3\",style:{maxHeight:\"38rem\"},children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-hover mt-3 fs-5\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"tr_color\",children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Update\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:userData.map((user,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(NavLink,{to:\"/updateuser/\".concat(user._id),className:\"btn btn-primary\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-pen-to-square\"})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:()=>deleteUser(user._id),children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-trash\"})})})]},index))})]})})]});}","map":{"version":3,"names":["React","useEffect","useState","NavLink","jsx","_jsx","jsxs","_jsxs","UserList","getUsers","userData","setUserData","res","fetch","method","headers","data","json","status","console","log","err","deleteUser","userId","concat","className","children","style","maxHeight","scope","map","user","index","name","email","to","_id","onClick"],"sources":["/home/lenovo/Gstock/Frontend/gestionDeStock/src/components/Client.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { NavLink } from 'react-router-dom';\n\nexport default function UserList() {\n\n    useEffect(() => {\n        getUsers(); // Appel de la fonction pour récupérer les données des utilisateurs lors du chargement du composant\n    }, []);\n\n    const [userData, setUserData] = useState([]); // Utilisation d'un état pour stocker les données des utilisateurs\n\n    const getUsers = async () => {\n        try {\n            const res = await fetch(\"http://localhost:3001/users\", { // Endpoint pour récupérer les utilisateurs\n                method: \"GET\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n\n            const data = await res.json();\n\n            if (res.status === 200) {\n                console.log(\"User data retrieved.\");\n                setUserData(data);\n            } else {\n                console.log(\"Something went wrong. Please try again.\");\n            }\n        } catch (err) {\n            console.log(err);\n        }\n    }\n\n    const deleteUser = async (userId) => {\n        try {\n            const res = await fetch(`http://localhost:3001/users/${userId}`, { // Endpoint pour supprimer l'utilisateur\n                method: \"DELETE\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n\n            if (res.status === 200) {\n                console.log(\"User deleted successfully.\");\n                // Mettre à jour la liste des utilisateurs après suppression\n                getUsers();\n            } else {\n                console.log(\"Failed to delete user.\");\n            }\n        } catch (err) {\n            console.log(err);\n        }\n    }\n\n    return (\n        <div className='container-fluid p-5'>\n            <h1>User List</h1>\n            <div className=\"overflow-auto mt-3\" style={{ maxHeight: \"38rem\" }}>\n                <table className=\"table table-striped table-hover mt-3 fs-5\">\n                    <thead>\n                        <tr className=\"tr_color\">\n                            <th scope=\"col\"></th>\n                            <th scope=\"col\">Name</th>\n                            <th scope=\"col\">Email</th>\n                            \n                            <th scope=\"col\">Update</th>\n                                <th scope=\"col\">Delete</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {\n                            userData.map((user, index) => (\n                                <tr key={index}>\n                                    <th scope=\"row\">{index + 1}</th>\n                                    <td>{user.name}</td>\n                                    <td>{user.email}</td>\n                                    <td><NavLink to={`/updateuser/${user._id}`}className=\"btn btn-primary\"><i className=\"fa-solid fa-pen-to-square\"></i></NavLink></td>\n                                    <td><button className=\"btn btn-danger\" onClick={() => deleteUser(user._id)}><i className=\"fa-solid fa-trash\"></i></button></td>\n                                   \n                                </tr>\n                            ))\n                        }\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}