{"ast":null,"code":"import React,{useEffect,useState}from'react';import{NavLink}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Products(){useEffect(()=>{getProducts();},[]);const[productData,setProductData]=useState([]);const getProducts=async e=>{try{const res=await fetch(\"http://localhost:3001/products\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}});const data=await res.json();if(res.status===201){console.log(\"Data Retrieved.\");setProductData(data);}else{console.log(\"Something went wrong. Please try again.\");}}catch(err){console.log(err);}};const deleteProduct=async id=>{const response=await fetch(\"http://localhost:3001/deleteproduct/\".concat(id),{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\"}});const deletedata=await response.json();console.log(deletedata);if(response.status===422||!deletedata){console.log(\"Error\");}else{console.log(\"Product deleted\");getProducts();}};const searchProduct=async e=>{e.preventDefault();const searchValue=e.target.elements.search.value;// Assurez-vous que e.target et e.target.elements existent\nif(!searchValue){console.log(\"La valeur de recherche est vide\");return;}try{const res=await fetch(\"http://localhost:3001/products/search/\".concat(searchValue),{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}});const data=await res.json();if(res.status===200){console.log(\"Résultats de la recherche :\",data);setProductData(data);}else{console.log(\"Aucun produit trouvé\");setProductData([]);}}catch(err){console.log(err);}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid p-5\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"All Products \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-end align-items-center\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"d-flex\",onSubmit:searchProduct,children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control me-2\",type:\"search\",name:\"search\",placeholder:\"Search\",\"aria-label\":\"Search\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary fs-5 me-3\",type:\"submit\",children:\"Search\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"add_button\",children:/*#__PURE__*/_jsx(NavLink,{to:\"/insertproduct\",className:\"btn btn-primary fs-5\",children:\" + Add New Product\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-auto mt-3\",style:{maxHeight:\"38rem\"},children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-hover mt-3 fs-5\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"tr_color\",children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Product Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Product Price\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Product Barcode\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\" Quantity\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Update\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:productData.map((element,id)=>{return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:id+1}),/*#__PURE__*/_jsx(\"td\",{children:element.ProductName}),/*#__PURE__*/_jsx(\"td\",{children:element.ProductPrice}),/*#__PURE__*/_jsx(\"td\",{children:element.ProductBarcode}),/*#__PURE__*/_jsx(\"td\",{children:element.ProductQuantity}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(NavLink,{to:\"/updateproduct/\".concat(element._id),className:\"btn btn-primary\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-pen-to-square\"})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:()=>deleteProduct(element._id),children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-trash\"})})})]})});})})]})})]})});}","map":{"version":3,"names":["React","useEffect","useState","NavLink","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Products","getProducts","productData","setProductData","e","res","fetch","method","headers","data","json","status","console","log","err","deleteProduct","id","response","concat","deletedata","searchProduct","preventDefault","searchValue","target","elements","search","value","children","className","onSubmit","type","name","placeholder","to","style","maxHeight","scope","map","element","ProductName","ProductPrice","ProductBarcode","ProductQuantity","_id","onClick"],"sources":["/home/lenovo/Gstock/Frontend/gestionDeStock/src/components/Products.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { NavLink } from 'react-router-dom'\n\nexport default function Products() {\n\n    useEffect(() => {\n        getProducts();\n    }, [])\n\n    const [productData, setProductData] = useState([]);\n\n\n    const getProducts = async (e) => {\n\n        try {\n            const res = await fetch(\"http://localhost:3001/products\", {\n                method: \"GET\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n\n            const data = await res.json();\n\n            if (res.status === 201) {\n                console.log(\"Data Retrieved.\");\n                setProductData(data);\n            }\n            else {\n                console.log(\"Something went wrong. Please try again.\");\n            }\n        } catch (err) {\n            console.log(err);\n        }\n    }\n\n    const deleteProduct = async (id) => {\n\n        const response = await fetch(`http://localhost:3001/deleteproduct/${id}`, {\n            method: \"DELETE\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n\n        const deletedata = await response.json();\n        console.log(deletedata);\n\n        if (response.status === 422 || !deletedata) {\n            console.log(\"Error\");\n        } else {\n            console.log(\"Product deleted\");\n            getProducts();\n        }\n\n    }\n\n    const searchProduct = async (e) => {\n        e.preventDefault();\n        const searchValue = e.target.elements.search.value; // Assurez-vous que e.target et e.target.elements existent\n        if (!searchValue) {\n            console.log(\"La valeur de recherche est vide\");\n            return;\n        }\n        try {\n            const res = await fetch(`http://localhost:3001/products/search/${searchValue}`, {\n                method: \"GET\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n            const data = await res.json();\n            if (res.status === 200) {\n                console.log(\"Résultats de la recherche :\", data);\n                setProductData(data);\n            } else {\n                console.log(\"Aucun produit trouvé\");\n                setProductData([]);\n            }\n        } catch (err) {\n            console.log(err);\n        }\n    }\n\n   \n   \n    \n    \n    \n    return (\n        <>\n            <div className='container-fluid p-5'>\n                <h1>All Products </h1>\n                <div className='d-flex justify-content-end align-items-center'>\n                   \n                    <form className=\"d-flex\"  onSubmit={searchProduct}>\n                    <input className=\"form-control me-2\" type=\"search\" name=\"search\" placeholder=\"Search\" aria-label=\"Search\" />\n              <button className=\"btn btn-primary fs-5 me-3\" type=\"submit\">Search</button>\n            </form>\n                    <div className='add_button'>\n                        <NavLink to=\"/insertproduct\" className='btn btn-primary fs-5'> + Add New Product</NavLink>\n                    </div>\n                </div>\n                <div className=\"overflow-auto mt-3\" style={{ maxHeight: \"38rem\" }}>\n                    <table className=\"table table-striped table-hover mt-3 fs-5\">\n                        <thead>\n                            <tr className=\"tr_color\">\n                                <th scope=\"col\"></th>\n                                <th scope=\"col\">Product Name</th>\n                                <th scope=\"col\">Product Price</th>\n                                <th scope=\"col\">Product Barcode</th>\n                                <th scope=\"col\"> Quantity</th>\n                                <th scope=\"col\">Update</th>\n                                <th scope=\"col\">Delete</th>\n                                \n                            </tr>\n                        </thead>\n                        <tbody>\n\n                            {\n                                productData.map((element, id) => {\n                                    return (\n                                        <>\n                                            <tr>\n                                                <th scope=\"row\">{id + 1}</th>\n                                                <td>{element.ProductName}</td>\n                                                <td>{element.ProductPrice}</td>\n                                                <td>{element.ProductBarcode}</td>\n                                                <td>{element.ProductQuantity}</td>\n\n                                                <td><NavLink to={`/updateproduct/${element._id}`} className=\"btn btn-primary\"><i className=\"fa-solid fa-pen-to-square\"></i></NavLink></td>\n                                                <td><button className=\"btn btn-danger\" onClick={() => deleteProduct(element._id)}><i className=\"fa-solid fa-trash\"></i></button></td>\n                                               \n\n                                            </tr>\n                                        </>\n                                    )\n                                })\n                            }\n\n                        </tbody>\n                    </table>\n                </div>\n\n            </div>\n\n        </>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}