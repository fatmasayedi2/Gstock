{"ast":null,"code":"import React,{useEffect,useState}from'react';import{NavLink,useParams,useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function InsertProduct(){const[productName,setProductName]=useState(\"\");const[productPrice,setProductPrice]=useState();const[productBarcode,setProductBarcode]=useState();const[productQuantity,setProductQuantity]=useState();const[loading,setLoading]=useState(false);const[error,setError]=useState(\"\");const navigate=useNavigate(\"\");const setName=e=>{setProductName(e.target.value);};const setPrice=e=>{setProductPrice(e.target.value);};const setBarcode=e=>{const value=e.target.value.slice(0,12);setProductBarcode(value);};const setQuantity=e=>{setProductQuantity(e.target.value);};const{id}=useParams(\"\");useEffect(()=>{const getProduct=async()=>{try{const res=await fetch(\"http://localhost:3001/products/\".concat(id),{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}});const data=await res.json();if(res.status===201){console.log(\"Data Retrieved.\");setProductName(data.ProductName);setProductPrice(data.ProductPrice);setProductBarcode(data.ProductBarcode);setProductQuantity(data.ProductQuantity);}else{console.log(\"Something went wrong. Please try again.\");}}catch(err){console.log(err);}};getProduct();},[id]);const updateProduct=async e=>{e.preventDefault();if(!productName||!productPrice||!productBarcode||!productQuantity){setError(\"*Please fill in all the required fields.\");return;}setLoading(true);setError(\"\");try{const response=await fetch(\"http://localhost:3001/updateproduct/\".concat(id),{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({\"ProductName\":productName,\"ProductPrice\":productPrice,\"ProductBarcode\":productBarcode,\"ProductQuantity\":productQuantity})});await response.json();if(response.status===201){alert(\"Data Updated\");navigate('/products');}else{setError(\"Something went wrong. Please try again.\");}}catch(err){setError(\"An error occurred. Please try again later.\");console.log(err);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid p-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"\",children:\"Enter Product Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5 col-lg-6 col-md-6 col-12\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"product_name\",className:\"form-label fs-4 fw-bold\",children:\"Product Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:setName,value:productName,className:\"form-control fs-5\",id:\"product_name\",placeholder:\"Enter Product Name\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 col-lg-6 col-md-6 col-12\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"product_price\",className:\"form-label fs-4 fw-bold\",children:\"Product Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:setPrice,value:productPrice,className:\"form-control fs-5\",id:\"product_price\",placeholder:\"Enter Product Price\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 col-lg-6 col-md-6 col-12\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"product_barcode\",className:\"form-label fs-4 fw-bold\",children:\"Product Barcode\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:setBarcode,value:productBarcode,maxLength:12,className:\"form-control fs-5\",id:\"product_barcode\",placeholder:\"Enter Product Barcode\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 mb-5 col-lg-6 col-md-6 col-12 fs-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"product_quantity\",className:\"form-label fw-bold\",children:\"Product Quantity\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:setQuantity,value:productQuantity,className:\"form-control fs-5\",id:\"product_quantity\",placeholder:\"Enter Product Quantity\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-center col-lg-6 col-md-6\",children:[/*#__PURE__*/_jsx(NavLink,{to:\"/products\",className:\"btn btn-primary me-5 fs-4\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:updateProduct,className:\"btn btn-primary fs-4\",disabled:loading,children:loading?'Updating...':'Update'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col text-center col-lg-6 \",children:error&&/*#__PURE__*/_jsx(\"div\",{className:\"text-danger mt-3 fs-5 fw-bold\",children:error})})]});}","map":{"version":3,"names":["React","useEffect","useState","NavLink","useParams","useNavigate","jsx","_jsx","jsxs","_jsxs","InsertProduct","productName","setProductName","productPrice","setProductPrice","productBarcode","setProductBarcode","productQuantity","setProductQuantity","loading","setLoading","error","setError","navigate","setName","e","target","value","setPrice","setBarcode","slice","setQuantity","id","getProduct","res","fetch","concat","method","headers","data","json","status","console","log","ProductName","ProductPrice","ProductBarcode","ProductQuantity","err","updateProduct","preventDefault","response","body","JSON","stringify","alert","className","children","htmlFor","type","onChange","placeholder","required","maxLength","to","onClick","disabled"],"sources":["/home/lenovo/Gstock/Frontend/gestionDeStock/src/components/UpdateProduct.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { NavLink, useParams, useNavigate } from 'react-router-dom';\n\nexport default function InsertProduct() {\n    const [productName, setProductName] = useState(\"\");\n    const [productPrice, setProductPrice] = useState();\n    const [productBarcode, setProductBarcode] = useState();\n    const [productQuantity, setProductQuantity] = useState(); \n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(\"\");\n    const navigate = useNavigate(\"\");\n\n    const setName = (e) => {\n        setProductName(e.target.value);\n      };\n    \n      const setPrice = (e) => {\n        setProductPrice(e.target.value);\n      };\n    \n      const setBarcode = (e) => {\n        const value = e.target.value.slice(0, 12);\n        setProductBarcode(value);\n    };\n    const setQuantity = (e) => {\n        setProductQuantity(e.target.value);\n      };\n\n    const {id} = useParams(\"\");\n\n    useEffect(() => {\n        const getProduct = async () => {\n          try {\n            const res = await fetch(`http://localhost:3001/products/${id}`, {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\"\n              }\n            });\n      \n            const data = await res.json();\n      \n            if (res.status === 201) {\n              console.log(\"Data Retrieved.\");\n              setProductName(data.ProductName);\n              setProductPrice(data.ProductPrice);\n              setProductBarcode(data.ProductBarcode);\n              setProductQuantity(data.ProductQuantity);\n            } else {\n              console.log(\"Something went wrong. Please try again.\");\n            }\n          } catch (err) {\n            console.log(err);\n          }\n        };\n      \n        getProduct();\n    }, [id]);\n\n    const updateProduct = async (e) => {\n        e.preventDefault();\n\n        if (!productName || !productPrice || !productBarcode || !productQuantity) {\n            setError(\"*Please fill in all the required fields.\");\n            return;\n        }\n\n        setLoading(true);\n        setError(\"\");\n\n        try {\n            const response = await fetch(`http://localhost:3001/updateproduct/${id}`, {\n                method: \"PUT\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({ \"ProductName\": productName, \"ProductPrice\": productPrice, \"ProductBarcode\": productBarcode, \"ProductQuantity\": productQuantity })\n            });\n\n            await response.json();\n\n            if (response.status === 201) {\n                alert(\"Data Updated\");\n                navigate('/products');\n            }\n            else {\n                setError(\"Something went wrong. Please try again.\");\n            }\n        } catch (err) {\n            setError(\"An error occurred. Please try again later.\");\n            console.log(err);\n        } finally {\n            setLoading(false);\n        }\n    }\n\n    return (\n        <div className='container-fluid p-5'>\n            <h1 className=''>Enter Product Information</h1>\n            <div className=\"mt-5 col-lg-6 col-md-6 col-12\">\n                <label htmlFor=\"product_name\" className=\"form-label fs-4 fw-bold\">Product Name</label>\n                <input type=\"text\" onChange={setName} value={productName} className=\"form-control fs-5\" id=\"product_name\" placeholder=\"Enter Product Name\" required />\n            </div>\n            <div className=\"mt-3 col-lg-6 col-md-6 col-12\">\n                <label htmlFor=\"product_price\" className=\"form-label fs-4 fw-bold\">Product Price</label>\n                <input type=\"number\" onChange={setPrice} value={productPrice} className=\"form-control fs-5\" id=\"product_price\" placeholder=\"Enter Product Price\" required />\n            </div>\n            <div className=\"mt-3 col-lg-6 col-md-6 col-12\">\n                <label htmlFor=\"product_barcode\" className=\"form-label fs-4 fw-bold\">Product Barcode</label>\n                <input type=\"number\" onChange={setBarcode} value={productBarcode} maxLength={12} className=\"form-control fs-5\" id=\"product_barcode\" placeholder=\"Enter Product Barcode\" required />\n            </div>\n            <div className=\"mt-3 mb-5 col-lg-6 col-md-6 col-12 fs-4\">\n            <label htmlFor=\"product_quantity\" className=\"form-label fw-bold\">Product Quantity</label>\n            <input type=\"number\" onChange={setQuantity} value={productQuantity} className=\"form-control fs-5\" id=\"product_quantity\" placeholder=\"Enter Product Quantity\" required />\n            </div>\n            <div className='d-flex justify-content-center col-lg-6 col-md-6'>\n                <NavLink to=\"/products\" className='btn btn-primary me-5 fs-4'>Cancel</NavLink>\n                <button type=\"submit\" onClick={updateProduct} className=\"btn btn-primary fs-4\" disabled={loading}>{loading ? 'Updating...' : 'Update'}</button>\n            </div>\n            <div className=\"col text-center col-lg-6 \">\n                {error && <div className=\"text-danger mt-3 fs-5 fw-bold\">{error}</div>}\n            </div>\n        </div>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}